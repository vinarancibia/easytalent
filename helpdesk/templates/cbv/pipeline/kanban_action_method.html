{% load static i18n helpdeskfilters %}
{% if tab != 'my_tickets' %}
    {% if perms.helpdesk.change_ticket or perms.helpdesk.change_claimrequest or request.user.employee_get|is_department_manager:ticket %}
        <li>
            <p
                class="w-full text-left px-3 py-1 hover:text-primary-600 font-semibold"
            >
                <a
                    hx-get = "{% url "view-ticket-claim-request" ticket.id %}"
                    hx-target="#objectDetailsModalTarget"
                    data-toggle="oh-modal-toggle"
                    data-target="#objectDetailsModal"
                >
                    {% trans "Claim Requests" %}
                </a>
            </p>
        </li>
    {% else %}
        {% if claim_request or request.user.employee_get in ticket.assigned_to.all %}
        {% else %}
                <li>
                    <p
                        class="w-full text-left px-3 py-1 hover:text-primary-600 font-semibold"
                    >
                        <a
                            href = "{% url 'claim-ticket' ticket.id %}"
                        >
                            {% trans "Claim" %}
                        </a>
                    </p>
                </li>
        {% endif %}
    {% endif %}
{% endif %}

{% if perms.helpdesk.change_ticket or request.user.employee_get|is_department_manager:ticket %}
    <li>
        <p
            class="w-full text-left px-3 py-1 hover:text-primary-600 font-semibold"
        >
            <a
                hx-get = "{% url 'ticket-update' ticket.id %}"
                hx-target="#objectCreateModalTarget"
                data-toggle="oh-modal-toggle"
                data-target="#objectCreateModal"
            >
                {% trans "Edit" %}
            </a>
        </p>
    </li>
{% endif %}

{% if perms.helpdesk.change_ticket or request.user.employee_get|is_department_manager:ticket %}
    <li>
        <p
            class="w-full text-left px-3 py-1 hover:text-primary-600 font-semibold"
        >
            <a
                hx-get = "{% url 'ticket-archive' ticket.id %}"
                hx-swap = "outerHTML"
                {% if ticket.is_active %}
                hx-confirm = "Do you want to archive this ticket?"
                {% else %}
                    hx-confirm = "Do you want to Un-archive this ticket?"
                {% endif %}
                hx-on-htmx-after-request="$('.reload-record').click()"
            >
                {% if ticket.is_active %}
                    {% trans "Archive" %}
                {% else %}
                    {% trans 'Un-archive' %}
                {% endif %}
            </a>
        </p>
    </li>
{% endif %}


{% if perms.helpdesk.delete_ticket %}
    {% if ticket.status == 'new' %}
        <li>
            <p
                class="w-full text-left px-3 py-1 hover:text-primary-600 font-semibold"
            >
                <a
                    href = "{% url 'ticket-delete' ticket.id %}"
                    onsubmit="return confirm('{% trans 'Are you sure you want to delete	this Ticket?' %}');"
                >
                    {% trans 'Delete' %}
                </a>
            </p>
        </li>
    {% endif %}
{% endif %}
